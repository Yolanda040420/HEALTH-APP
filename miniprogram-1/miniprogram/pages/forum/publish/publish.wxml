<!-- pages/forum/publish/publish.wxml -->
<view class="page">
  <!-- 自定义导航栏 -->
  <view class="custom-navbar" style="padding-top: {{statusBarHeight}}px;">
    <view class="navbar-content">
      <view class="navbar-back" bindtap="onBack">
        <text class="back-icon">‹</text>
      </view>
      <text class="navbar-title">发布帖子</text>
      <view class="navbar-placeholder"></view>
    </view>
  </view>

  <scroll-view class="content-scroll" scroll-y="true" style="margin-top: 180rpx;">
    <view class="publish-container">
      <!-- 内容输入 -->
      <view class="form-section">
        <textarea class="content-input" 
                  placeholder="分享你的想法..."
                  value="{{content}}"
                  bindinput="onContentInput"
                  maxlength="500"
                  show-confirm-bar="{{false}}"
                  auto-height="{{true}}"
                  cursor-spacing="20"></textarea>
        <view class="char-count">{{content.length}}/500</view>
      </view>

      <!-- 图片上传 -->
      <view class="form-section">
        <view class="section-title">添加图片（最多9张）</view>
        <view class="images-upload">
          <block wx:for="{{images}}" wx:key="*this" wx:for-item="img" wx:for-index="imgIdx">
            <view class="image-item">
              <image src="{{img}}" mode="aspectFill"></image>
              <view class="image-delete" data-index="{{imgIdx}}" bindtap="onDeleteImage">×</view>
            </view>
          </block>
          <view class="image-upload-btn" wx:if="{{images.length < 9}}" bindtap="onChooseImage">
            <text class="upload-icon">+</text>
            <text class="upload-text">添加图片</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 发布按钮 -->
  <view class="publish-footer">
    <button class="publish-btn" 
            disabled="{{!content || content.trim() === ''}}"
            bindtap="onPublish">发布</button>
  </view>
</view>

